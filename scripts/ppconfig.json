{"name":"YouTuan","url":"https://account.fuhaogou.com","showName":"店长助手","appid":"com.youtuan.app","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":true,"version":"1.0.1","preview":"Android","platform":["1-1","1-2","2-1","2-2"],"width":412,"height":915,"desc":"","jsFile":[],"filterCss":"","customJs":"console.log(\n    '%cbuild from PakePlus： https://github.com/Sjj1024/PakePlus',\n    'color:orangered;font-weight:bolder'\n)\n\n// 加载外部CSS的函数，成功则不加载JS，失败则加载JS作为备用\nfunction loadExternalCss(url, fallbackJsUrl) {\n    // 先检查CSS是否已加载\n    const existingLink = document.querySelector(`link[href=\"${url}\"]`);\n    if (existingLink) {\n        console.log(`外部CSS已存在，无需加载: ${url}`);\n        console.log('CSS已加载，不加载备用JS');\n        return;\n    }\n\n    const link = document.createElement('link');\n    link.href = url;\n    link.rel = 'stylesheet';\n    link.type = 'text/css';\n\n    // 确保在DOM准备好后再加载CSS\n    const loadWhenReady = () => {\n        if (document.readyState === 'complete' || document.readyState === 'interactive') {\n            document.head.appendChild(link);\n        } else {\n            setTimeout(loadWhenReady, 100);\n        }\n    };\n\n    // CSS加载成功 - 不加载JS\n    link.onload = function() {\n        console.log(`外部CSS加载成功: ${url}`);\n        console.log('CSS加载成功，不加载备用JS');\n    };\n\n    // CSS加载失败 - 尝试加载备用JS\n    link.onerror = function() {\n        console.error(`外部CSS加载失败: ${url}`);\n        // 失败重试机制，最多重试5次\n        retryLoadCss(url, fallbackJsUrl, 5, 2000);\n    };\n\n    loadWhenReady();\n}\n\n// 加载外部JS的函数（仅作为CSS加载失败的备用方案）\nfunction loadExternalScript(url) {\n    // 先检查脚本是否已加载\n    const existingScript = document.querySelector(`script[src=\"${url}\"]`);\n    if (existingScript) {\n        console.log(`备用JS已加载: ${url}`);\n        return;\n    }\n\n    const script = document.createElement('script');\n    script.src = url;\n    script.type = 'text/javascript';\n    script.async = false;\n    script.defer = false;\n\n    const executeWhenReady = () => {\n        if (document.readyState === 'complete' || document.readyState === 'interactive') {\n            document.head.appendChild(script);\n        } else {\n            setTimeout(executeWhenReady, 100);\n        }\n    };\n\n    script.onload = function() {\n        console.log(`备用JS加载成功: ${url}`);\n        if (typeof window.hideElements === 'function') {\n            try {\n                window.hideElements();\n                console.log('hideElements函数执行成功');\n            } catch (e) {\n                console.error('hideElements函数执行出错:', e);\n            }\n        } else {\n            console.warn('备用JS中未找到hideElements函数');\n        }\n    };\n\n    script.onerror = function() {\n        console.error(`备用JS加载失败: ${url}`);\n        retryLoadJs(url, 3, 2000);\n    };\n\n    executeWhenReady();\n}\n\n// CSS重试加载函数 - 多次失败后加载备用JS\nfunction retryLoadCss(cssUrl, jsUrl, maxRetries, delay) {\n    let retries = 0;\n    \n    const attemptLoad = () => {\n        retries++;\n        if (retries <= maxRetries) {\n            console.log(`CSS第${retries}次重试加载: ${cssUrl}`);\n            setTimeout(() => loadExternalCss(cssUrl, jsUrl), delay);\n        } else {\n            console.error(`CSS达到最大重试次数(${maxRetries})，尝试加载备用JS`);\n            loadExternalScript(jsUrl); // CSS最终失败，加载备用JS\n        }\n    };\n    \n    attemptLoad();\n}\n\n// JS重试加载函数\nfunction retryLoadJs(url, maxRetries, delay) {\n    let retries = 0;\n    \n    const attemptLoad = () => {\n        retries++;\n        if (retries <= maxRetries) {\n            console.log(`备用JS第${retries}次重试加载: ${url}`);\n            setTimeout(() => loadExternalScript(url), delay);\n        } else {\n            console.error(`备用JS达到最大重试次数(${maxRetries})，停止加载`);\n        }\n    };\n    \n    attemptLoad();\n}\n\n// 处理chunk加载失败的错误\nwindow.addEventListener('error', function(e) {\n    if (e.target.tagName === 'SCRIPT') {\n        const url = e.target.src;\n        if (url.includes('chunk')) {\n            console.error(`Chunk加载失败: ${url}`);\n            retryLoadJs(url, 3, 3000);\n        }\n    }\n}, true);\n\n// 加载CSS，并指定备用JS地址\nloadExternalCss(\n    'https://server.kexuny.cn/work/midd.css', \n    'https://server.kexuny.cn//work/midd.js'\n);\n\n// 核心点击事件处理，请勿修改\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    location.href = url\n}\n\ndocument.addEventListener('click', hookClick, { capture: true })\n    ","isHtml":false,"htmlPath":"","htmlFiles":[],"more":{"windows":{"label":"","title":"店长助手","url":"https://account.fuhaogou.com","userAgent":"Mozilla/5.0 (Linux; Android 14; Pixel 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36","width":412,"height":915,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"YouTuan","showName":"店长助手","version":"1.0.1","webUrl":"https://account.fuhaogou.com","id":"com.youtuan.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"android":{"name":"YouTuan","showName":"店长助手","version":"1.0.1","webUrl":"https://account.fuhaogou.com","id":"com.youtuan.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"desktop":{"name":"YouTuan","showName":"店长助手","version":"1.0.1","id":"com.youtuan.app.desktop","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","webUrl":"https://account.fuhaogou.com","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}